(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(l){if(l.ep)return;l.ep=!0;const i=o(l);fetch(l.href,i)}})();function c(e,t,o,n){const l=document.createElement(e);return o&&(l.textContent=o),t&&t.length>0&&l.classList.add(...t),n!=null&&n.appendChild(l),l}function S(e,t,o,n){var i;const l=e;return t&&t.length>0&&l.classList.add(...t),o&&o.length>0&&((i=l.classList)==null||i.remove(...o)),n&&(l.textContent=n),l}const re="https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/data/wordCollectionLevel1.json",ce="https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/",se=10;let v=750,x=500,b=0,G=0,m=0,A=0,H="",D="",T=!1,C,k;const O=[],F=c("div",["puzzle-container"]),z=c("div",["puzzle-div"]),{body:y}=document,K=c("div",["source-div"]),_=c("div",["buttons-div"]),d=c("div",["source-field"]),g=c("button",["check","hidden"],"Check"),ee=c("button",["autocomplete"],"Auto-Complete");function ae(){localStorage.getItem("texthint")?C=JSON.parse(localStorage.texthint):(localStorage.setItem("texthint","true"),C=!0),localStorage.getItem("audiohint")?k=JSON.parse(localStorage.audiohint):(localStorage.setItem("audiohint","true"),k=!0)}ae();const de=e=>{for(let t=0;t<se;t+=1){const o=c("div",["puzzle-row"],"",e);o.dataset.id=`row_${t}`}F.append(e),y.append(F)};function te(){var o,n,l,i,r,s,$,I;const e=z.children;let t;for(let h=0;h<e.length;h+=1)if(m===0){if(((n=(o=e[h])==null?void 0:o.children)==null?void 0:n.length)===0){t=e[h];break}}else(((i=(l=e[h])==null?void 0:l.children)==null?void 0:i.length)>0&&((s=(r=e[h+1])==null?void 0:r.children)==null?void 0:s.length)===0||((I=($=e[h])==null?void 0:$.children)==null?void 0:I.length)>0&&!e[h+1])&&(t=e[h]);return t}function ue(e,t){e.addEventListener("click",o=>{const n=o.target,l=n.closest(".puzzle-row");n&&n.parentElement===l&&(n.style.opacity="0",n.style.transition="opacity 0.5s ease",setTimeout(()=>{const i=Array.from(d.children),r=t.findIndex($=>$.match(/ /g));console.log(r),r===-1?(d.appendChild(n),n.style.width=q(t,n.textContent),m-=A,console.log(m),m<0&&(m=0)):(n.style.width=q(t,n.textContent),d.insertBefore(n,i[r]),t.pop(),m-=A,console.log(m),m<0&&(m=0)),S(n,["source-field-word"],["puzzle-row-word","wrong"]),n.style.width=q(t,n.textContent),n.style.opacity="1",n.style.transition="opacity 0.5s ease";const s=d.querySelector(".emptyEl");s&&d.removeChild(s)},200))})}function B(e,t){const o=e.querySelectorAll(t);for(let n=0;n<o.length;n+=1)o[n].remove()}function he(e,t,o){const n=t[o].textExample.split(" ");if(e){const l=Array.from(e.children),i=[];l.forEach(r=>{r.textContent&&i.push(r.textContent)}),console.log(i),i.length===n.length&&(S(g,[],["hidden"]),g.addEventListener("click",()=>{if(n.every((r,s)=>r===i[s]))T=!0,W(H),l.forEach(r=>{S(r,["filled-row"],["wrong"])}),S(g,["next","accept"],["check"],"Continue"),g.addEventListener("click",P,!1);else{const r=[];for(let s=0;s<n.length;s+=1)n[s]!==i[s]&&r.push(s);console.log(r),r.forEach(s=>{l[s].classList.add("wrong")}),r.splice(0,r.length),i.splice(0,i.length)}}))}}function me(e,t){const o=te();d.querySelectorAll(".source-field-word").forEach(n=>{n.addEventListener("click",l=>{const i=l.target;i&&i.parentElement===d&&(i.style.opacity="0",i.style.transition="opacity 0.5s ease",setTimeout(()=>{var I;o==null||o.appendChild(i),m+=A,S(i,["puzzle-row-word"],["source-field-word"]),i.style.opacity="1";const r=c("div",["source-field-word","emptyEl"],"",d);r.textContent=(I=i.textContent)==null?void 0:I.replace(/[\w\W]+/g," "),r.style.width=i.style.width,r.style.height=i.style.height;const s=[];Array.from(d.children).forEach(h=>{h.textContent&&s.push(h.textContent)}),ue(i,s),he(o,e,t)},400))})})}function q(e,t){const o=e.join("").length,n=v/o;return`${t?t.length*n:3}px`}function J(){var e;document.querySelector(".hint-cont")&&((e=document.querySelector(".hint-cont"))==null||e.remove())}function W(e){if(C||T){J();const t=c("div",["hint-cont"]),o=c("img",["hint-img"]),n=c("h2",["hint"],e);t.append(o,n),F.prepend(t)}}function U(){var e;document.querySelector(".audio-hint-cont")&&((e=document.querySelector(".audio-hint-cont"))==null||e.remove())}function j(e){if(k||T){U();const t=document.querySelector(".buttons-div"),o=c("div",["audio-hint-cont"]),n=c("img",["audio-hint-img"]);o.append(n),t?t.prepend(o):_.prepend(o),o.addEventListener("click",()=>{const l=c("audio",["audio-hint"],"",o);n.classList.add("play"),l.setAttribute("autoplay","true"),l.innerHTML=`<source src="${ce+e}" type="audio/mpeg">`,l.addEventListener("ended",()=>{n.classList.remove("play")})})}}function ne(e,t){H=e[t].textExampleTranslate,D=e[t].audioExample;const o=e[t].textExample.split(" "),n=o.map((r,s)=>({text:r,id:s,newId:0}));d.style.width=`${v}px`;const l=n.sort(()=>Math.random()-.5),i=o.sort(()=>Math.random()-.5);A=+(100/i.length).toFixed(2),console.log(l),i.forEach(r=>{const s=c("div",["source-field-word"],r,d);s.style.width=q(i,r),s.style.height=`${x/10}px`}),me(e,t),_.append(ee,g),K.append(d,_),y.append(K),W(H),j(D)}function fe(){const e=Array.from(d.children);e.forEach(t=>{t&&t.remove();const o=c("div",["source-field-word","emptyEl"]," ",d);o.style.width=`${v/e.length}px`,d.style.height=`${x/10}px`})}function oe(){if(localStorage.user){const e=c("div",["modal","visible"],""),t=c("div",["result"],"",e),o=c("h3",["greeting"],"Are you sure you want to log out?");t.appendChild(o);const n=c("button",[],"Yes",t),l=c("button",[],"No",t);y==null||y.appendChild(e),n.addEventListener("click",()=>{var r;(r=e.classList)==null||r.remove("visible"),delete localStorage.user,delete localStorage.audiohint,delete localStorage.texthint,Array.from(document.body.children).forEach(s=>document.body.removeChild(s))}),l.addEventListener("click",()=>{var i;(i=e.classList)==null||i.remove("visible"),y==null||y.removeChild(e)})}}function pe(){const e=document.querySelector(".texthint-off");if(e)C=!0,localStorage.setItem("texthint",JSON.stringify(C)),e.classList.add("texthint-on"),e.classList.remove("texthint-off"),W(H);else{const t=document.querySelector(".texthint-on");t&&(C=!1,localStorage.setItem("texthint",JSON.stringify(C)),t.classList.add("texthint-off"),t.classList.remove("texthint-on"),J())}}function ge(){const e=document.querySelector(".audio-hint-on");if(e)k=!1,localStorage.setItem("audiohint","false"),e.classList.add("audio-hint-off"),e.classList.remove("audio-hint-on"),U();else{const t=document.querySelector(".audio-hint-off");t&&(k=!0,localStorage.setItem("audiohint","true"),t.classList.add("audio-hint-on"),t.classList.remove("audio-hint-off"),j(D))}}function ve(){const e=c("nav",["navbar"],""),t=JSON.parse(localStorage.user),o=c("h2",["great-greet"],"");o.textContent=`Welcome, ${t.name} ${t.surname}!`,e.append(o);const n=c("div",["buttons-div"],"");e.appendChild(n),y.appendChild(e),c("button",[`audio-hint-${k?"on":"off"}`],"",n).addEventListener("click",ge,!1),c("button",[`texthint-${C?"on":"off"}`],"",n).addEventListener("click",pe,!1),c("button",["exit"],"",n).addEventListener("click",()=>{oe()})}function ye(){B(z,".puzzle-row"),B(d,".emptyEl"),ve(),de(z)}function Y(e,t){const o=e;o.style.width=q(t,o.textContent),o.style.height=`${x/10}px`}async function ie(e){try{const o=await(await fetch(re)).json();Object.assign(O,o.rounds[e].words),ye(),ne(O,b),ee.addEventListener("click",()=>{T=!0,W(H),j(D);const n=O[b].textExample.split(" "),l=te(),i=l==null?void 0:l.children;if(i)for(let r=0;r<n.length;r+=1)if(i[r])i[r].textContent=n[r],i[r].classList.add("filled-row"),Y(i[r],n);else{const s=c("div",["puzzle-row-word","filled-row"],`${n[r]}`);l.append(s),Y(s,n)}fe(),S(g,["next","accept"],["check","hidden"],"Continue"),g.addEventListener("click",P,!1)})}catch(t){console.error("Error: ",t)}}window.addEventListener("resize",()=>{if(document.documentElement.clientWidth<850)v=750;else if(document.documentElement.clientWidth<1e3){v=document.documentElement.clientWidth-100,x=Math.floor(v/1.5),d.style.width=`${v}px`,d.style.height=`${x/10}px`;let e=0,t=0;d.querySelectorAll(".source-field-word").forEach(o=>{o instanceof HTMLDivElement&&o.textContent&&(e+=o.textContent.length)}),t=v/e,d.querySelectorAll(".source-field-word").forEach(o=>{const n=o;n instanceof HTMLDivElement&&n.textContent&&(n.style.width=`${n.textContent.length*t}px`,n.style.height=`${x/10}px`)}),z.style.width=`${v}px`,z.style.height=`${x}px`,z.querySelectorAll(".puzzle-row-word").forEach(o=>{const n=o;n instanceof HTMLDivElement&&n.textContent&&(n.style.width=`${n.textContent.length*t}px`,n.style.height=`${x/10}px`)})}});function P(){B(d,".emptyEl"),J(),U(),T=!1,O[b+1]?(b+=1,m=0,A=0,ne(O,b),S(g,["check","hidden"],["next","accept"],"Check"),g.removeEventListener("click",P,!1)):(b=0,G+=1,m=0,A=0,g.removeEventListener("click",P,!1),ie(G))}const p=document.createElement("form"),a=document.createElement("input"),u=document.createElement("input"),w=document.createElement("button"),f=document.querySelector("body");class Ee extends Error{constructor(t){super(t),this.name="ValidationError"}}const E=document.createElement("div"),Q=document.createElement("h1"),X=document.createElement("h2"),M=c("button",["start-button"]),R=document.createElement("button"),N=document.createElement("h1"),Z=document.createElement("span");function le(){if(localStorage.user){const e=JSON.parse(localStorage.user);N.classList.add("great-greet"),Z.textContent=`${e.name} ${e.surname}!`,Z.classList.add("fio-animation"),N.innerText="Welcome, ",N.appendChild(Z),E.appendChild(N),E.classList.add("start-page"),Q.textContent="ENGLISH PUZZLE",E.appendChild(Q),X.textContent="Click on words, collect phrases. Words can be drag and drop. Select tooltips in the menu.",E.appendChild(X),M.textContent="Start",E.appendChild(M),R.textContent="Logout",E.appendChild(R),f==null||f.appendChild(E),e.length=0}}function xe(){localStorage.user?le():(a.type="text",a.minLength=3,a.name="firstname",a.placeholder="First Name",a.pattern="^[A-Z][\\-a-zA-z]{2,}$",a.required=!0,u.type="text",u.minLength=4,u.name="surname",u.placeholder="Surname",u.pattern="^[A-Z][\\-a-zA-z]{3,}$",u.required=!0,w.type="submit",w.textContent="Login",w.disabled=!0,p.appendChild(a),p.appendChild(u),p.appendChild(w),f==null||f.appendChild(p))}function V(){a.value===""||u.value===""?w.disabled=!0:w.disabled=!1}function L(e,t){const o=new Ee(t);e.insertAdjacentHTML("afterend",`<p class="error-message">${o.message}</p>`),setTimeout(()=>{const n=document.querySelector(".error-message");p==null||p.removeChild(n)},3e3),w.disabled=!0}function Ce(){if(a.value||L(a,`Please, enter ${a.placeholder}`),a.validity.tooShort){const e=a.getAttribute("minLength");L(a,`The minimum length should be ${e}`)}a.value.match(/^[A-Z]/g)||L(a,"First letter should be capital"),a.value.match(/[a-zA-z]/g)||L(a,"Only latin letters and hyphen allowed"),V()}function Le(){if(u.value||L(u,`Please, enter ${a.placeholder}`),u.validity.tooShort){const e=u.getAttribute("minLength");L(u,`The minimum length should be ${e}`)}u.value.match(/^[A-Z]/g)||L(u,"First letter should be capital"),u.value.match(/[a-zA-z]/g)||L(u,"Only latin letters and hyphen allowed"),V()}p.addEventListener("keyup",V);a.addEventListener("focusout",Ce);u.addEventListener("focusout",Le);p.addEventListener("submit",()=>{const e={name:a.value,surname:u.value};localStorage.setItem("user",JSON.stringify(e)),p.submit(),f==null||f.removeChild(p),le()});R.addEventListener("click",()=>oe());M.addEventListener("click",()=>{localStorage.user&&(f==null||f.removeChild(E),ie(0))});xe();
